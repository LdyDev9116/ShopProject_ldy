<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Around | Account - Sign Up</title>
  <!-- SEO Meta Tags-->
  <meta name="description" content="Around - Multipurpose Bootstrap HTML Template">
  <meta name="keywords" content="bootstrap, business, corporate, coworking space, services, creative agency, dashboard, e-commerce, mobile app showcase, saas, multipurpose, product landing, shop, software, ui kit, web studio, landing, dark mode, html5, css3, javascript, gallery, slider, touch, creative">
  <meta name="author" content="Createx Studio">
  <!-- Viewport-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Favicon and Touch Icons-->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="mask-icon" color="#6366f1" href="assets/favicon/safari-pinned-tab.svg">
  <meta name="msapplication-TileColor" content="#080032">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="white">
  <!-- Theme mode-->
  <script>
    let mode = window.localStorage.getItem('mode'),
            root = document.getElementsByTagName('html')[0];
    if (mode !== undefined && mode === 'dark') {
      root.classList.add('dark-mode');
    } else {
      root.classList.remove('dark-mode');
    }
  </script>
  <!-- Page loading styles-->
  <style>
    .page-loading {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-transition: all .4s .2s ease-in-out;
      transition: all .4s .2s ease-in-out;
      background-color: #fff;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }
    .dark-mode .page-loading {
      background-color: #121519;
    }
    .page-loading.active {
      opacity: 1;
      visibility: visible;
    }
    .page-loading-inner {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      text-align: center;
      -webkit-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: opacity .2s ease-in-out;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }
    .page-loading.active > .page-loading-inner {
      opacity: 1;
    }
    .page-loading-inner > span {
      display: block;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      font-weight: normal;
      color: #6f788b;
    }
    .dark-mode .page-loading-inner > span {
      color: #fff;
      opacity: .6;
    }
    .page-spinner {
      display: inline-block;
      width: 2.75rem;
      height: 2.75rem;
      margin-bottom: .75rem;
      vertical-align: text-bottom;
      background-color: #d7dde2;
      border-radius: 50%;
      opacity: 0;
      -webkit-animation: spinner .75s linear infinite;
      animation: spinner .75s linear infinite;
    }
    .dark-mode .page-spinner {
      background-color: rgba(255,255,255,.25);
    }
    @-webkit-keyframes spinner {
      0% {
        -webkit-transform: scale(0);
        transform: scale(0);
      }
      50% {
        opacity: 1;
        -webkit-transform: none;
        transform: none;
      }
    }
    @keyframes spinner {
      0% {
        -webkit-transform: scale(0);
        transform: scale(0);
      }
      50% {
        opacity: 1;
        -webkit-transform: none;
        transform: none;
      }
    }
  </style>
  <!-- Page loading scripts-->
  <script>
    (function () {
      window.onload = function () {
        const preloader = document.querySelector('.page-loading');
        preloader.classList.remove('active');
        setTimeout(function () {
          preloader.remove();
        }, 1500);
      };
    })();
  </script>
  <!-- Import Google Font-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet" id="google-font">
  <!-- Vendor styles-->
  <!-- Main Theme Styles + Bootstrap-->
  <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">
</head>
<!-- Body-->
<body>
<!-- Page loading spinner-->
<div class="page-loading active">
  <div class="page-loading-inner">
    <div class="page-spinner"></div><span>Loading...</span>
  </div>
</div>
<!-- Page wrapper-->
<main class="page-wrapper">
  <!-- Page content-->
  <div class="d-lg-flex position-relative h-100">
    <!-- Home button--><a class="text-nav btn btn-icon bg-light border rounded-circle position-absolute top-0 end-0 p-0 mt-3 me-3 mt-sm-4 me-sm-4" href="/" data-bs-toggle="tooltip" data-bs-placement="left" title="Back to home"><i class="ai-home"></i></a>
    <!-- Sign up form-->
    <div class="d-flex flex-column align-items-center w-lg-50 h-100 px-3 px-lg-5 pt-5">
      <div class="w-100 mt-auto" style="max-width: 526px;">
        <h1>계정이 없나요? 가입하기</h1>
        <p class="pb-3 mb-3 mb-lg-4">이미 계정이 있나요?&nbsp;&nbsp;<a href='account-signin'>여기에서 로그인 하세요!</a></p>
        <form class="needs-validation" id="signupForm" th:action="@{/account-signup}" th:object="${joinEntity}" method="post" novalidate>
          <div class="mb-4">
            <input class="form-control form-control-lg" type="text" placeholder="ID" th:field="*{memberId}" id="memberId" required>
            <div id="memberIdFeedback" class="invalid-feedback"></div>
          </div>
          <div class="password-toggle mb-4">
            <input class="form-control form-control-lg" type="password" placeholder="Password" th:field="*{password}" id="password" required>
            <label class="password-toggle-btn" aria-label="Show/hide password">
              <input class="password-toggle-check" type="checkbox"><span class="password-toggle-indicator"></span>
            </label>
          </div>
          <div class="password-toggle mb-4">
            <input class="form-control form-control-lg" type="password" placeholder="Confirm password" id="confirmPassword" required>
            <label class="password-toggle-btn" aria-label="Show/hide password">
              <input class="password-toggle-check" type="checkbox"><span class="password-toggle-indicator"></span>
            </label>
          </div>
          <div class="mb-4">
            <input class="form-control form-control-lg" type="email" placeholder="Email address" th:field="*{email}" required>
          </div>
          <div class="mb-4">
            <input class="form-control form-control-lg" type="text" placeholder="name" th:field="*{username}" required>
          </div>
          <div class="mb-4">
            <input class="form-control form-control-lg" type="text" placeholder="Phone number" th:field="*{phone}" required>
          </div>
          <div class="pb-4">
            <div class="form-check my-2">
              <input class="form-check-input" type="checkbox" id="terms">
              <label class="form-check-label ms-1" for="terms">이용약관 <a href="#" id="termsLink">보기</a> &amp; 동의합니다</label>
            </div>
          </div>
          <button class="btn btn-lg btn-primary w-100 mb-4" type="submit" id="submitBtn">가입하기</button>
          <h2 class="h6 text-center pt-3 pt-lg-4 mb-4">또는 소셜 계정으로 로그인하세요</h2>
          <div class="row row-cols-1 row-cols-sm-2 gy-3">
            <div class="col"><a class="btn btn-icon btn-outline-secondary btn-google btn-lg w-100" href="#"><i class="ai-google fs-xl me-2"></i>Google</a></div>
            <div class="col"><a class="btn btn-icon btn-outline-secondary btn-facebook btn-lg w-100" href="#"><i class="ai-facebook fs-xl me-2"></i>Facebook</a></div>
          </div>
        </form>
      </div>
      <!-- Copyright-->
      <p class="w-100 fs-sm pt-5 mt-auto mb-5" style="max-width: 526px;"><span class="text-muted">&copy; 주문번호와 비밀번호를 잊으신 경우, 고객센터로 문의하여 주시기 바랍니다. </span><a class="nav-link d-inline-block p-0 ms-1" href="https://createx.studio/" target="_blank" rel="noopener">1577 - 1004</a></p>
    </div>
    <!-- Cover image-->
    <div class="w-50 bg-size-cover bg-repeat-0 bg-position-center" style="background-image: url(/assets/img/shop/banner3.jpg);"></div>
  </div>
</main>
<!-- Back to top button--><a class="btn-scroll-top" href="#top" data-scroll>
  <svg viewBox="0 0 40 40" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="19" fill="none" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10"></circle>
  </svg><i class="ai-arrow-up"></i></a>
<!-- Vendor scripts: js libraries and plugins-->
<script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<!-- Main theme script-->
<script src="assets/js/theme.min.js"></script>

<!-- Modal HTML -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="termsModalLabel">이용약관 동의</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="max-height: 60vh; overflow-y: auto;">
        <h3>Fresh Kit 이용약관</h3>
        <p>제1조(목적)</p>
        <p>본 약관은 주식회사 Fresh Kit  (전자상거래 사업자/이하 “회사”라 합니다)가 운영하는 ”Fresh Kit ” 사이버 몰(이하 “Fresh Kit  몰”이라 한다)에서 제공하는 인터넷 관련 서비스(이하 “서비스”라 한다)를 이용함에 있어 Fresh Kit  몰과 이용자의 권리•의무 및 책임사항을 규정함을 목적으로 합니다.</p>
        <p>※ PC통신 등을 이용하는 전자거래에 대해서도 그 성질에 반하지 않는 한 이 약관을 준용합니다.
          제2조(정의)
          “Fresh Kit  몰”이란 회사가 재화 또는 용역(이하 “재화 등”이라 함)을 이용자에게 제공하기 위하여 컴퓨터 등 정보통신설비를 이용하여 재화 등을 거래할 수 있도록 설정한 가상의 영업장을 말하며, 아울러 “Fresh Kit  몰”을 운영하는 사업자의 의미로도 사용합니다.
          “이용자”란 “Fresh Kit  몰”에 접속하여 본 약관에 따라 “Fresh Kit  몰”이 제공하는 서비스를 받는 회원 및 비회원을 말합니다.
          “회원”이라 함은 “Fresh Kit  몰”에 개인정보를 제공하여 회원등록을 한 자로서, “Fresh Kit  몰”의 정보 및 서비스를 지속적으로 제공 및 이용할 수 있는 자를 말합니다.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
        <button type="button" class="btn btn-primary" id="agreeBtn">동의</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const signupForm = document.getElementById('signupForm');
    const memberIdInput = document.getElementById('memberId');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const memberIdFeedback = document.getElementById('memberIdFeedback');
    const submitBtn = document.getElementById('submitBtn');
    const termsCheckbox = document.getElementById('terms');
    const termsLink = document.getElementById('termsLink');
    const agreeBtn = document.getElementById('agreeBtn');

    memberIdInput.addEventListener('input', function () {
      const memberId = memberIdInput.value;

      if (memberId) {
        fetch(`/api/user/exists?memberId=${memberId}`)
                .then(response => response.json())
                .then(data => {
                  if (data) {
                    alert('이미 존재하는 사용자 이름입니다. 다시 입력해 주세요.');
                    memberIdInput.value = ''; // 입력 필드 초기화
                    memberIdInput.focus(); // 입력 필드에 포커스
                  }
                })
                .catch(error => {
                  console.error('Error:', error);
                });
      }
    });

    signupForm.addEventListener('submit', function(event) {
      event.preventDefault();
      const formData = new FormData(signupForm);

      const password = passwordInput.value;
      const confirmPassword = confirmPasswordInput.value;

      if (password !== confirmPassword) {
        alert('패스워드를 동일하게 작성해주세요.');
        passwordInput.value = '';
        confirmPasswordInput.value = '';
        passwordInput.focus();
        return;
      }

      if (!termsCheckbox.checked) {
        alert('이용약관에 동의 해주세요.');
        return;
      }

      fetch(signupForm.action, {
        method: 'POST',
        body: formData
      })
              .then(response => {
                if (!response.ok) {
                  return response.text().then(text => { throw new Error(text) });
                }
                return response.text();
              })
              .then(data => {
                alert('회원가입이 완료되었습니다.');
                window.location.href = '/account-signup';
              })
              .catch(error => {
                alert(error.message);
              });
    });

    termsLink.addEventListener('click', function(event) {
      event.preventDefault();
      const termsModal = new bootstrap.Modal(document.getElementById('termsModal'));
      termsModal.show();
    });

    agreeBtn.addEventListener('click', function() {
      termsCheckbox.checked = true;
      const termsModal = bootstrap.Modal.getInstance(document.getElementById('termsModal'));
      termsModal.hide();
    });
  });
</script>
</body>
</html>
